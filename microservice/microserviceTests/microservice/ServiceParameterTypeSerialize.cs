using Beamable.Server;
using NUnit.Framework;

namespace microserviceTests.microservice;

public class ServiceParameterTypeSerialize
{
	private static readonly object[] JsonTestCases =
	{
		new object[] {null, null},
		new object[] {"\"Test\"", "Test"},
		new object[] {"{\"current_player_name\":\"NAME_NOT_SET\",\"min_high_offer\":0,\"individual_chase_low_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0.0},\"individual_chase_medium_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0.0},\"individual_chase_high_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0.0},\"final_chase_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0.0},\"standard_question_pack\":{\"question_ids_array\":[],\"num_times_question_used_array\":[],\"first_repeated_question\":false,\"total_questions_asked\":0},\"starter_case_region\":\"\",\"special_offer_seen\":false,\"last_special_offer_id\":\"\",\"special_offer_first_available\":\"0001-01-01T00:00:00\",\"special_offer_button_check_date\":\"0001-01-01T00:00:00\",\"num_interstitial_ads_seen\":0,\"no_ads_offer_last_seen\":\"0001-01-01T00:00:00\",\"current_league\":[],\"current_league_score\":0,\"current_league_end_epoch\":0,\"previous_league_score\":0,\"previous_league_end_epoch\":0,\"previous_league_rank\":0,\"previous_league_tier\":0,\"tier\":-1,\"all_time_score\":0,\"total_collection_power\":0,\"previous_league_placing\":-2147483648,\"old_rank\":-2147483648,\"old_tier\":-2147483648,\"played_last_league\":false,\"_id\":1694959453988865,\"last_played_game_utc_time_ticks\":0,\"install_time_utc_time_ticks\":638382718585975460,\"local_time_utc_offset_hours\":-2147483648,\"save_data_version\":\"1.0.0\",\"client_version\":\"1.1.4(E)\",\"current_device_id\":\"D1CB4382-8761-53F4-A662-9EBB5B966A32\",\"default_user_data_hashcode\":-213611405,\"next_spending_limit_reset_utc_time_ticks\":-9223372036854775808,\"total_amount_spent\":0,\"current_special_offer_reset_epoch\":-9223372036854775808,\"current_special_offer_id\":\"\",\"has_purchased_special_offer\":false,\"has_shown_special_offer_popup\":false,\"has_given_starter_special_offer\":false,\"spender\":false,\"tutorial_shown_array\":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],\"first_game_completed\":false,\"tracking_consent\":true,\"achievements_save_data\":[],\"daily_goals_last_reset\":0,\"daily_goals_last_claimed_timed_reward\":0,\"achievement_hunter_claimed\":false,\"special_offer_data\":[],\"last_special_offer_shown\":\"0001-01-01T00:00:00\",\"disable_adverts\":false,\"oqs_player_data\":[],\"last_played_stage\":0,\"final_chase_chaser_had_perfect_run_last_game\":false,\"cash_builder_max_win\":0,\"individual_chase_max_win\":0,\"final_chase_max_win\":0,\"user_category_stats\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"chaser_game_stats\":[],\"favourite_chaser_id\":[],\"profile\":{\"name\":\"Guest8865\",\"fb_image_url\":\"\"},\"single_player_info\":{\"recover_account_level\":0,\"user_id\":\"\",\"tier\":0,\"league_winnings\":0,\"unlocked_stage\":0,\"name\":\"Guest8865\",\"local_name\":\"Guest8865\",\"profile_picture_url\":\"\"},\"has_run_out_gold_before\":false,\"has_run_out_cash_before\":false}", "{\"current_player_name\":\"NAME_NOT_SET\",\"min_high_offer\":0,\"individual_chase_low_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0},\"individual_chase_medium_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0},\"individual_chase_high_offer_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0},\"final_chase_game_results_data\":{\"recent_win_history\":{\"data\":[],\"capacity\":20},\"all_time_num_games_played\":0,\"all_time_num_games_won\":0,\"num_games_played_since_last_adjustment\":0,\"current_difficulty_level\":0},\"standard_question_pack\":{\"question_ids_array\":[],\"num_times_question_used_array\":[],\"first_repeated_question\":false,\"total_questions_asked\":0},\"starter_case_region\":\"\",\"special_offer_seen\":false,\"last_special_offer_id\":\"\",\"special_offer_first_available\":\"0001-01-01T00:00:00\",\"special_offer_button_check_date\":\"0001-01-01T00:00:00\",\"num_interstitial_ads_seen\":0,\"no_ads_offer_last_seen\":\"0001-01-01T00:00:00\",\"current_league\":[],\"current_league_score\":0,\"current_league_end_epoch\":0,\"previous_league_score\":0,\"previous_league_end_epoch\":0,\"previous_league_rank\":0,\"previous_league_tier\":0,\"tier\":-1,\"all_time_score\":0,\"total_collection_power\":0,\"previous_league_placing\":-2147483648,\"old_rank\":-2147483648,\"old_tier\":-2147483648,\"played_last_league\":false,\"_id\":1694959453988865,\"last_played_game_utc_time_ticks\":0,\"install_time_utc_time_ticks\":638382718585975460,\"local_time_utc_offset_hours\":-2147483648,\"save_data_version\":\"1.0.0\",\"client_version\":\"1.1.4(E)\",\"current_device_id\":\"D1CB4382-8761-53F4-A662-9EBB5B966A32\",\"default_user_data_hashcode\":-213611405,\"next_spending_limit_reset_utc_time_ticks\":-9.223372036854776E+18,\"total_amount_spent\":0,\"current_special_offer_reset_epoch\":-9.223372036854776E+18,\"current_special_offer_id\":\"\",\"has_purchased_special_offer\":false,\"has_shown_special_offer_popup\":false,\"has_given_starter_special_offer\":false,\"spender\":false,\"tutorial_shown_array\":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],\"first_game_completed\":false,\"tracking_consent\":true,\"achievements_save_data\":[],\"daily_goals_last_reset\":0,\"daily_goals_last_claimed_timed_reward\":0,\"achievement_hunter_claimed\":false,\"special_offer_data\":[],\"last_special_offer_shown\":\"0001-01-01T00:00:00\",\"disable_adverts\":false,\"oqs_player_data\":[],\"last_played_stage\":0,\"final_chase_chaser_had_perfect_run_last_game\":false,\"cash_builder_max_win\":0,\"individual_chase_max_win\":0,\"final_chase_max_win\":0,\"user_category_stats\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"chaser_game_stats\":[],\"favourite_chaser_id\":[],\"profile\":{\"name\":\"Guest8865\",\"fb_image_url\":\"\"},\"single_player_info\":{\"recover_account_level\":0,\"user_id\":\"\",\"tier\":0,\"league_winnings\":0,\"unlocked_stage\":0,\"name\":\"Guest8865\",\"local_name\":\"Guest8865\",\"profile_picture_url\":\"\"},\"has_run_out_gold_before\":false,\"has_run_out_cash_before\":false}"}
	};

	[Test]
	[TestCaseSource(nameof(JsonTestCases))]
	public void DeserializeStringParametersTest(string sourceValue, string? expectedValue)
	{
		var result = ServiceMethodHelper.DeserializeStringParameter(sourceValue);
		
		Assert.AreEqual(expectedValue, result);
	}
}
