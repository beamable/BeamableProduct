using Beamable.Api.Autogenerated.Models;
using cli.Services;

namespace cli.OtelCommands;

[Serializable]
public class FetchTelemetryLogsCommandArgs : CommandArgs
{
}

public class FetchTelemetryLogsResult
{
}

public class FetchTelemetryLogsCommand : AtomicCommand<FetchTelemetryLogsCommandArgs, FetchTelemetryLogsResult>
{
	public FetchTelemetryLogsCommand() : base("logs", "Fetch logs from Clickhouse")
	{
	}

	public override void Configure()
	{
	}

	public override async Task<FetchTelemetryLogsResult> GetResult(FetchTelemetryLogsCommandArgs args)
	{
		OtelAuthConfig res = await args.OtelApi.GetOtelAuthReaderConfig();
		var result = await ClickhouseConnection.FetchLogs(res);

		return new FetchTelemetryLogsResult();
	}
}
