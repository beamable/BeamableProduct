using Beamable.Api.Autogenerated.Leaderboards;
using Beamable.Api.Autogenerated.Models;
using Beamable.Common;
using Beamable.Common.Api;
using Beamable.Coroutines;
using System;

namespace Beamable.Player
{

	[Serializable]
	public class PlayerTopScoresList : PlayerScoreList
	{
		public PlayerTopScoresList(IPlayerLeaderboardFriend board, ILeaderboardsApi api, IUserContext ctx, CoroutineService coroutineService)
			: base(board, api, ctx, coroutineService)
		{
			
		}
		
		protected override Promise<LeaderBoardViewResponse> CreateRequest(LeaderboardAssignmentInfo info)
		{
			return _api.ObjectGetView(info.leaderboardId, from: 0, max: Size, outlier: _ctx.UserId);
		}

		public PlayerTopScoresList LoadCount(int totalSize)
		{
			_size = totalSize;
			var _ = Refresh();
			return this;
		}
		
		public new async Promise<PlayerTopScoresList> Refresh()
		{
			await base.Refresh();
			return this;
		}

	}

}
