// this file was copied from nuget package Beamable.Common@6.1.0-PREVIEW.RC1
// https://www.nuget.org/packages/Beamable.Common/6.1.0-PREVIEW.RC1

using Beamable.Common.BeamCli;
using System;
using System.Collections.Generic;
using Beamable.Api.Autogenerated.Models;
using Beamable.Common.Content;

namespace Beamable.Common
{
	public interface IFederatedGameServer<in T> : IFederation where T : IFederationId, new()
	{
		Promise<ServerInfo> CreateGameServer(Lobby lobby);
	}

	[Serializable, CliContractType]
	public class LocalSettings_IFederatedGameServer : IFederation.ILocalSettings
	{
		public string[] contentIds;
	}

	[Serializable]
	public class ServerInfo
	{
		public UpdateLobby lobbySettings = new UpdateLobby()
		{
			data = new OptionalUpdateData(new UpdateData()
			{
				updates = new OptionalMapOfString(new Dictionary<string, string>()),
				deletes = new OptionalArrayOfString(Array.Empty<string>())
			}),
		};

		public Dictionary<string, string> globalData
		{
			get => lobbySettings.data.Value.updates.Value;
			set => lobbySettings.data.Value.updates.Value = new MapOfString(value);
		}

		public Dictionary<string, Dictionary<string, string>> playerData = new Dictionary<string, Dictionary<string, string>>();
	}
}
