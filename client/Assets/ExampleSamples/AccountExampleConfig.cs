
using Beamable.Api.Autogenerated.Models;
using Beamable.Avatars;
using Beamable.Common.Dependencies;
using Beamable.Player;
using Beamable.Runtime.LightBeam;
using UnityEngine;

[CreateAssetMenu(menuName = "Beamable/Examples/Account Example Config")]
public class AccountExampleConfig : ScriptableObject
{
	public AccountManagementExample homePage;
	public AccountSwitchPage switchPage;
	public RegisterEmailPage registerPage;
	public RecoverEmailPage recoverPage;
	public ForgotPasswordPage ForgotPasswordPage;

	public AvatarDisplayBehaviour avatarDisplayTemplate;
	public AccountDisplayBehaviour accountDisplayTemplate;
	public AccountDetailsBehaviour accountDetailsTemplate;
}

public static class AccountUtil
{
	public static void RegisterAccountPages(this IDependencyBuilder builder, AccountExampleConfig config)
	{
		builder.AddSingleton(config);

		builder.AddLightComponent(config.homePage);
		builder.AddLightComponent<ForgotPasswordPage, ForgotPasswordModel>(config.ForgotPasswordPage);
		builder.AddLightComponent<RecoverEmailPage, RecoverEmailPageModel>(config.recoverPage);
		builder.AddLightComponent(config.registerPage);
		builder.AddLightComponent<AccountSwitchPage, PlayerAccount>(config.switchPage);
		
		builder.AddLightComponent<AvatarDisplayBehaviour, AccountAvatar>(config.avatarDisplayTemplate);
		builder.AddLightComponent<AccountDisplayBehaviour, PlayerAccount>(config.accountDisplayTemplate);
		builder.AddLightComponent<AccountDetailsBehaviour, PlayerAccount>(config.accountDetailsTemplate);
	}
}
